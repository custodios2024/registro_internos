<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Internos</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <img src="logo_sspc2.png" alt="Logo" class="logo">
        <h2>Registro de Internos</h2>
        <form id="registroForm">
            <!-- Campos del formulario -->
            <label for="fecha">Fecha:</label>
            <input type="date" id="fecha" required>
            
            <label for="hora">Hora:</label>
            <input type="time" id="hora" required>

            <label for="motivo">Motivo:</label>
            <input type="text" id="motivo" required>

            <label for="excarcelados">Excarcelados:</label>
            <input type="number" id="excarcelados" required>

            <label for="presentes">Presentes:</label>
            <input type="number" id="presentes" required>

            <label for="total">Total:</label>
            <input type="number" id="total" required>

            <label for="custodio">Custodio Responsable:</label>
            <input type="text" id="custodio" required>

            <label for="personal">Personal D.G.R.S:</label>
            <input type="text" id="personal" required>

            <label for="centro">Centro de Internamiento:</label>
            <input type="text" id="centro" value="DIRECCIÓN DE MEDIDAS DE EJECUCIÓN PARA ADOLESCENTES" required>
            
            <button type="button" class="btn" onclick="guardarPDFDia()">Guardar PDF del Día</button>
            <button type="button" class="btn" onclick="guardarPDFCompleto()">Guardar Completo</button>
        </form>
    </div>

    <script>
        async function guardarPDFDia() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF('l', 'pt', 'a4');
            const fecha = document.getElementById('fecha').value;
            const hora = document.getElementById('hora').value;
            const motivo = document.getElementById('motivo').value;
            const excarcelados = document.getElementById('excarcelados').value;
            const presentes = document.getElementById('presentes').value;
            const total = document.getElementById('total').value;
            const custodio = document.getElementById('custodio').value;
            const personal = document.getElementById('personal').value;
            const centro = document.getElementById('centro').value;

            // Agregar contenido al PDF
            doc.text(`Centro de Internamiento: ${centro}`, 14, 30);
            doc.text('Registro de Internos', 14, 50);
            doc.text(`Fecha: ${fecha}`, 14, 70);
            doc.text(`Hora: ${hora}`, 14, 90);
            doc.text(`Motivo: ${motivo}`, 14, 110);
            doc.text(`Excarcelados: ${excarcelados}`, 14, 130);
            doc.text(`Presentes: ${presentes}`, 14, 150);
            doc.text(`Total: ${total}`, 14, 170);
            doc.text(`Custodio Responsable: ${custodio}`, 14, 190);
            doc.text(`Personal D.G.R.S: ${personal}`, 14, 210);

            // Descargar PDF
            doc.save(`Registro_Dia_${fecha}.pdf`);
        }

        async function guardarPDFCompleto() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF('l', 'pt', 'a4');

            // Agregar contenido al PDF completo
            doc.text('Registro Completo', 14, 30);
            // Aquí agregar el resto de los datos que quieres incluir en el PDF completo

            // Guardar en Google Drive
            const pdfData = doc.output('blob');
            const formData = new FormData();
            formData.append('file', pdfData, 'Registro_Completo.pdf');

            // Envía el PDF a Google Drive (implementa tu lógica de carga aquí)
            const response = await fetch('/upload-to-google-drive', {
                method: 'POST',
                body: formData,
            });

            if (response.ok) {
                alert('PDF completo guardado en Google Drive');
            } else {
                alert('Error al guardar el PDF en Google Drive');
            }
        }
    </script>
</body>
</html>
